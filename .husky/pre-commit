#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Cháº¡y lint-staged Ä‘á»ƒ kiá»ƒm tra cÃ¡c file Ä‘Ã£ staged
npx lint-staged

# Kiá»ƒm tra TypeScript compilation
echo "ğŸ” Checking TypeScript compilation..."
npm run build

# Kiá»ƒm tra Prisma schema náº¿u cÃ³ thay Ä‘á»•i
if git diff --cached --name-only | grep -q "prisma/"; then
  echo "ğŸ“‹ Prisma changes detected, validating and formatting..."
  npx prisma validate
  npx prisma format
  git add prisma/schema.prisma
fi

echo "âœ… Pre-commit checks passed!"
